<!DOCTYPE html>
<html>
  <body>
    <script type="text/javascript">
      "use strict";
      function formatDate(date) {
        let dateNow = new Date();
        let offset = dateNow.getTime() - date.getTime();
        if (offset < 1000) {
          return "right now";
        } else if (offset < 60 * 1000) {
          return `${Math.floor(offset / 1000)} sec. ago`;
        } else if (offset < 3600 * 1000) {
          return `${Math.floor(offset / 1000 / 60)} min. ago`;
        } else {
          let num = date.getDate();
          let month = date.getMonth() + 1;
          let year = date.getFullYear();
          let hour = date.getHours();
          let minute = date.getMinutes();
          return `${num > 10 ? num : "0" + num}.${
            month > 10 ? month : "0" + month
          }.${String(year).substring(2)} ${hour > 10 ? hour : "0" + hour}:${
            minute > 10 ? minute : "0" + minute
          }`;
        }
      }
      alert(formatDate(new Date(new Date() - 1))); // "right now"

      alert(formatDate(new Date(new Date() - 30 * 1000))); // "30 sec. ago"

      alert(formatDate(new Date(new Date() - 5 * 60 * 1000))); // "5 min. ago"

      // 昨天的日期，例如 31.12.16 20:00
      alert(formatDate(new Date(new Date() - 86400 * 1000)));
    </script>
  </body>
</html>
